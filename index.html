<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Best Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:Arial;background:#f5f5f5}
header{
  background:#000;color:#fff;padding:10px;
  display:flex;justify-content:space-between;align-items:center;
  position:sticky;top:0
}
button{
  background:#000;color:#fff;border:none;
  padding:6px 10px;margin:2px;border-radius:6px;cursor:pointer
}
.products{
  display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
  gap:15px;padding:15px
}
.product{
  background:#fff;border-radius:8px;padding:10px;text-align:center;
  transition:.3s
}
.product:hover{
  transform:translateY(-5px);
  box-shadow:0 10px 20px rgba(0,0,0,.15)
}
.product img{width:100%;height:140px;object-fit:cover;border-radius:6px}
.cart{
  position:fixed;top:0;right:-100%;width:280px;height:100%;
  background:#fff;padding:10px;transition:.3s;box-shadow:-2px 0 10px rgba(0,0,0,.3)
}
.cart.show{right:0}
.cart-item{border-bottom:1px solid #ddd;padding:5px 0}
input{width:100%;padding:8px;margin:5px 0}
.box{background:#fff;padding:15px;border-radius:8px;margin:15px}
.hidden{display:none}
</style>
</head>

<body>

<header>
  <b>BEST STORE</b>
  <div>
    <span id="userName"></span>
    <button onclick="showLogin()">Ø¯Ø®ÙˆÙ„</button>
    <button onclick="showAdmin()">Ø£Ø¯Ù…Ù†</button>
    <button onclick="openCart()">ğŸ›’ (<span id="cartCount">0</span>)</button>
  </div>
</header>

<!-- Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
<div class="products" id="products"></div>

<!-- Ø§Ù„Ø³Ù„Ø© -->
<div class="cart" id="cart">
  <h3>ğŸ›’ Ø§Ù„Ø³Ù„Ø©</h3>
  <div id="cartItems"></div>
  <p id="total">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: 0$</p>
  <button onclick="checkout()">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡</button>
  <button onclick="closeCart()">Ø¥ØºÙ„Ø§Ù‚</button>
</div>

<!-- ØªØ³Ø¬ÙŠÙ„ / Ø¯Ø®ÙˆÙ„ -->
<div class="box hidden" id="auth">
  <h3>ØªØ³Ø¬ÙŠÙ„ / Ø¯Ø®ÙˆÙ„</h3>
  <input id="name" placeholder="Ø§Ù„Ø§Ø³Ù…">
  <input id="email" placeholder="Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„">
  <input id="pass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  <button onclick="register()">ØªØ³Ø¬ÙŠÙ„</button>
  <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>

<!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† -->
<div class="box hidden" id="admin">
  <h3>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</h3>
  <input id="pname" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
  <input id="pprice" type="number" placeholder="Ø§Ù„Ø³Ø¹Ø±">
  <input id="pimg" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©">
  <button onclick="addProduct()">â• Ø¥Ø¶Ø§ÙØ©</button>
  <hr>
  <div id="adminProducts"></div>
  <hr>
  <h4>ğŸ“¦ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h4>
  <div id="orders"></div>
</div>

<script>
const ADMIN_EMAIL="wled49645@gmail.com";

/* ====== Ø¨ÙŠØ§Ù†Ø§Øª ====== */
let products=JSON.parse(localStorage.getItem("products"))||[
  {id:1,name:"Ø³Ù…Ø§Ø¹Ø©",price:25,img:"https://via.placeholder.com/200"}
];
let cart=[];
let orders=JSON.parse(localStorage.getItem("orders"))||[];

/* ====== Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ====== */
function renderProducts(){
  const box=document.getElementById("products");
  box.innerHTML="";
  products.forEach(p=>{
    box.innerHTML+=`
      <div class="product">
        <img src="${p.img}">
        <b>${p.name}</b>
        <p>${p.price}$</p>
        <button onclick="addToCart(${p.id})">Ø£Ø¶Ù</button>
      </div>`;
  });
}
renderProducts();

/* ====== Ø§Ù„Ø³Ù„Ø© ====== */
function addToCart(id){
  cart.push(products.find(p=>p.id===id));
  updateCart();
}
function updateCart(){
  let total=0;
  const box=document.getElementById("cartItems");
  box.innerHTML="";
  cart.forEach(i=>{
    total+=Number(i.price);
    box.innerHTML+=`<div class="cart-item">${i.name} - ${i.price}$</div>`;
  });
  document.getElementById("cartCount").innerText=cart.length;
  document.getElementById("total").innerText="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: "+total+"$";
}
function openCart(){document.getElementById("cart").classList.add("show")}
function closeCart(){document.getElementById("cart").classList.remove("show")}

/* ====== ØªØ³Ø¬ÙŠÙ„ / Ø¯Ø®ÙˆÙ„ ====== */
function showLogin(){toggle("auth")}
function register(){
  localStorage.setItem("user",JSON.stringify({
    name:name.value,email:email.value,pass:pass.value
  }));
  alert("ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„");
}
function login(){
  const u=JSON.parse(localStorage.getItem("user"));
  if(!u||email.value!==u.email||pass.value!==u.pass)
    return alert("Ø®Ø·Ø£");
  localStorage.setItem("logged","true");
  if(u.email===ADMIN_EMAIL) localStorage.setItem("admin","true");
  document.getElementById("userName").innerText="ğŸ‘‹ "+u.name;
  alert("ØªÙ… Ø§Ù„Ø¯Ø®ÙˆÙ„");
  toggle();
}

/* ====== Ø´Ø±Ø§Ø¡ ====== */
function checkout(){
  if(!localStorage.getItem("logged"))
    return alert("Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹");
  const total=cart.reduce((s,i)=>s+Number(i.price),0);
  orders.push({
    id:Date.now(),
    user:JSON.parse(localStorage.getItem("user")).email,
    total,
    date:new Date().toLocaleString()
  });
  localStorage.setItem("orders",JSON.stringify(orders));
  cart=[];updateCart();closeCart();
  alert("ØªÙ… Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­ âœ…");
}

/* ====== Ø£Ø¯Ù…Ù† ====== */
function showAdmin(){
  if(localStorage.getItem("admin")!=="true")
    return alert("Ù„ÙŠØ³ Ø£Ø¯Ù…Ù†");
  toggle("admin");
  renderAdmin();
}
function addProduct(){
  products.push({
    id:Date.now(),
    name:pname.value,
    price:pprice.value,
    img:pimg.value
  });
  localStorage.setItem("products",JSON.stringify(products));
  renderProducts();renderAdmin();
}
function renderAdmin(){
  const pbox=document.getElementById("adminProducts");
  pbox.innerHTML="";
  products.forEach(p=>{
    pbox.innerHTML+=`${p.name} - ${p.price}$ 
    <button onclick="del(${p.id})">Ø­Ø°Ù</button><br>`;
  });
  const obox=document.getElementById("orders");
  obox.innerHTML="";
  orders.forEach(o=>{
    obox.innerHTML+=`ğŸ†”${o.id} | ${o.user} | ${o.total}$ | ${o.date}<hr>`;
  });
}
function del(id){
  products=products.filter(p=>p.id!==id);
  localStorage.setItem("products",JSON.stringify(products));
  renderProducts();renderAdmin();
}

/* ====== Ù…Ø³Ø§Ø¹Ø¯ ====== */
function toggle(id){
  document.querySelectorAll(".box").forEach(b=>b.classList.add("hidden"));
  if(id) document.getElementById(id).classList.remove("hidden");
}
</script>

</body>
</html>
