<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ahmed Shop</title>
<style>
body{
margin:0;
font-family:Arial;
background:linear-gradient(135deg,#141e30,#243b55);
color:#fff;
}
.container{
max-width:900px;
margin:30px auto;
background:#111;
padding:20px;
border-radius:12px;
}
input,select,button{
width:100%;
padding:10px;
margin:6px 0;
border-radius:8px;
border:none;
}
button{
background:#00d4ff;
font-weight:bold;
cursor:pointer;
}
.hidden{display:none}
.grid{
display:grid;
grid-template-columns:repeat(3,1fr);
gap:15px;
margin-top:20px;
}
.card{
background:#1e1e1e;
padding:25px;
border-radius:12px;
text-align:center;
cursor:pointer;
}
.product{
background:#222;
padding:10px;
border-radius:8px;
margin:5px 0;
}
.admin-btn{
background:red;
color:white;
margin-top:5px;
}
</style>
</head>
<body>

<div class="container" id="auth">
<h2>Ahmed Shop</h2>
<input id="name" placeholder="Name">
<input id="email" placeholder="Email">
<input id="pass" type="password" placeholder="Password">
<select id="currency">
<option value="USD">USD</option>
<option value="TRY">TRY</option>
<option value="SYP">SYP</option>
</select>
<button onclick="register()">Create Account</button>
<button onclick="login()">Login</button>
<p id="msg"></p>
</div>

<div class="container hidden" id="app">
<h3 id="welcome"></h3>
<p>Balance: <span id="balance"></span> <span id="cur"></span></p>
<button onclick="logout()">Logout</button>

<div class="grid">
<div class="card" onclick="openSection('apps')">ðŸ“± Applications</div>
<div class="card" onclick="openSection('games')">ðŸŽ® Games</div>
<div class="card" onclick="openSection('topup')">ðŸ’Ž Game Top-Up</div>
</div>

<div id="section"></div>

<div id="adminPanel" class="hidden">
<h3>Admin Panel</h3>
<input id="pname" placeholder="Product name">
<input id="pprice" type="number" placeholder="Price">
<select id="pcat">
<option value="apps">Applications</option>
<option value="games">Games</option>
<option value="topup">Game Top-Up</option>
</select>
<button onclick="addProduct()">Add Product</button>
</div>
</div>

<script>
const adminEmail="wled49645@gmail.com";

function getUsers(){return JSON.parse(localStorage.getItem("users")||"{}")}
function saveUsers(u){localStorage.setItem("users",JSON.stringify(u))}

function register(){
let u=getUsers();
if(u[email.value]){msg.innerText="Account exists";return;}
u[email.value]={name:name.value,pass:pass.value,currency:currency.value,balance:0};
saveUsers(u);
msg.innerText="Account created, login now";
}

function login(){
let u=getUsers();
if(!u[email.value]||u[email.value].pass!==pass.value){msg.innerText="Wrong data";return;}
localStorage.setItem("current",email.value);
loadApp();
}

function logout(){
localStorage.removeItem("current");
location.reload();
}

function loadApp(){
let email=localStorage.getItem("current");
let u=getUsers()[email];
auth.classList.add("hidden");
app.classList.remove("hidden");
welcome.innerText="Welcome "+u.name;
balance.innerText=u.balance;
cur.innerText=u.currency;
if(email===adminEmail)adminPanel.classList.remove("hidden");
}

function getProducts(){return JSON.parse(localStorage.getItem("products")||"[]")}
function saveProducts(p){localStorage.setItem("products",JSON.stringify(p))}

function addProduct(){
let p=getProducts();
p.push({name:pname.value,price:pprice.value,cat:pcat.value});
saveProducts(p);
openSection(pcat.value);
}

function deleteProduct(i){
let p=getProducts();
p.splice(i,1);
saveProducts(p);
openSection(currentCat);
}

let currentCat="";

function openSection(cat){
currentCat=cat;
let div=document.getElementById("section");
div.innerHTML="<h3>"+cat.toUpperCase()+"</h3>";
let p=getProducts();
p.forEach((x,i)=>{
if(x.cat===cat){
div.innerHTML+=`
<div class="product">
${x.name} - ${x.price}
${localStorage.getItem("current")===adminEmail?
`<button class="admin-btn" onclick="deleteProduct(${i})">Delete</button>`:""}
</div>`;
}
});

if(cat==="topup"){
div.innerHTML+=`
<h4>Minimum transfer: 5 USD</h4>
<p>Sham Cash Code:</p>
<b>29607b06505ee18f34a7fc5022404325</b>
<input id="amount" type="number" placeholder="Amount">
<input id="img" type="file" accept="image/*">
<button onclick="sendTopup()">Send Request</button>`;
}
}

function sendTopup(){
let amount=document.getElementById("amount").value;
let img=document.getElementById("img").files[0];
if(amount<5){alert("Minimum is 5 USD");return;}
if(!img){alert("Image required");return;}
alert("Request sent for review");
}

if(localStorage.getItem("current"))loadApp();
</script>

</body>
</html>
