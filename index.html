<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Best Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#f5f5f5}
header{background:#000;color:#fff;padding:10px;display:flex;justify-content:space-between;align-items:center}
button{background:#000;color:#fff;border:none;padding:6px 10px;border-radius:6px;cursor:pointer;margin:2px}
.products{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:15px;padding:15px}
.product{background:#fff;padding:10px;border-radius:8px}
.product img{width:100%;height:140px;object-fit:cover;border-radius:6px}
.box{background:#fff;padding:15px;border-radius:8px;margin:15px}
.hidden{display:none}
input,select,textarea{width:100%;padding:7px;margin:5px 0}
hr{margin:10px 0}
</style>
</head>

<body>

<header>
  <b>BEST STORE</b>
  <div>
    <span id="userName"></span>
    <button id="loginBtn" onclick="showLogin()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
    <button onclick="showSection('charge')">ØªØ¹Ø¨Ø¦Ø© Ø±ØµÙŠØ¯</button>
  </div>
</header>

<!-- Ø§Ù„Ø£Ù‚Ø³Ø§Ù… -->
<div class="box">
  <button onclick="filterCat('all')">Ø§Ù„ÙƒÙ„</button>
  <button onclick="filterCat('apps')">ğŸ“± ØªØ·Ø¨ÙŠÙ‚Ø§Øª</button>
  <button onclick="filterCat('items')">ğŸ§© Ø£Ø´ÙŠØ§Ø¡</button>
</div>

<!-- Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
<div class="products" id="products"></div>

<!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<div class="box hidden" id="loginBox">
  <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>
  <input id="name" placeholder="Ø§Ù„Ø§Ø³Ù…">
  <input id="email" placeholder="Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„">
  <input id="pass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
  <button onclick="googleLogin()">ØªØ³Ø¬ÙŠÙ„ Ø¹Ø¨Ø± Google</button>
</div>

<!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† (Ù…Ø®ÙÙŠØ©) -->
<div class="box hidden" id="adminBox">
  <h3>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</h3>
  <input id="pname" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
  <textarea id="pdesc" placeholder="ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬"></textarea>
  <input id="pid" placeholder="ID (Ù…Ø«Ø§Ù„ ÙØ±ÙŠ ÙØ§ÙŠØ±)">
  <input id="pbalance" placeholder="Ø§Ù„Ø±ØµÙŠØ¯ / Ø§Ù„ÙƒÙ…ÙŠØ©">
  <input id="pprice" type="number" placeholder="Ø§Ù„Ø³Ø¹Ø±">
  <input id="pimg" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø©">
  <select id="pcat">
    <option value="apps">ØªØ·Ø¨ÙŠÙ‚Ø§Øª</option>
    <option value="items">Ø£Ø´ÙŠØ§Ø¡</option>
  </select>
  <button onclick="addProduct()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬</button>
  <hr>
  <div id="adminProducts"></div>
  <hr>
  <h4>Ø·Ù„Ø¨Ø§Øª ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø±ØµÙŠØ¯</h4>
  <div id="charges"></div>
</div>

<!-- ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø±ØµÙŠØ¯ -->
<div class="box hidden" id="chargeBox">
  <h3>ØªØ¹Ø¨Ø¦Ø© Ø±ØµÙŠØ¯</h3>
  <p>Ø­ÙˆÙ‘Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø³Ø§Ø¨:</p>
  <b>29607b06505ee18f34a7fc5022404325</b>
  <input id="camount" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº">
  <input id="cimg" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„">
  <button onclick="sendCharge()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
</div>

<script>
const ADMIN="wled49645@gmail.com";
let products=JSON.parse(localStorage.getItem("products"))||[];
let charges=JSON.parse(localStorage.getItem("charges"))||[];
let currentUser=JSON.parse(localStorage.getItem("user"));

function render(cat="all"){
  const box=document.getElementById("products");
  box.innerHTML="";
  products.filter(p=>cat==="all"||p.cat===cat).forEach(p=>{
    box.innerHTML+=`
    <div class="product">
      <img src="${p.img}">
      <b>${p.name}</b>
      <p>${p.desc}</p>
      <small>ID: ${p.pid}</small><br>
      <small>Ø§Ù„Ø±ØµÙŠØ¯: ${p.balance}</small>
      <p>${p.price}$</p>
    </div>`;
  });
}
render();

function filterCat(c){render(c)}

function showLogin(){toggle("loginBox")}
function showSection(id){toggle(id+"Box")}

function login(){
  currentUser={name:name.value,email:email.value};
  localStorage.setItem("user",JSON.stringify(currentUser));
  document.getElementById("userName").innerText="ğŸ‘‹ "+currentUser.name;
  document.getElementById("loginBtn").style.display="none";
  toggle();
  if(currentUser.email===ADMIN){
    document.getElementById("adminBox").classList.remove("hidden");
    renderAdmin();
  }
}

function googleLogin(){
  alert("Ø³ÙŠØªÙ… Ø±Ø¨Ø· Google Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø¹Ø¨Ø± Firebase");
}

function addProduct(){
  products.push({
    name:pname.value,
    desc:pdesc.value,
    pid:pid.value,
    balance:pbalance.value,
    price:pprice.value,
    img:pimg.value,
    cat:pcat.value
  });
  localStorage.setItem("products",JSON.stringify(products));
  render();
  renderAdmin();
}

function renderAdmin(){
  const box=document.getElementById("adminProducts");
  box.innerHTML="";
  products.forEach((p,i)=>{
    box.innerHTML+=`${p.name} <button onclick="del(${i})">Ø­Ø°Ù</button><br>`;
  });
  const c=document.getElementById("charges");
  c.innerHTML="";
  charges.forEach(o=>{
    c.innerHTML+=`ğŸ’° ${o.amount} | <img src="${o.img}" width="80"><hr>`;
  });
}

function del(i){
  products.splice(i,1);
  localStorage.setItem("products",JSON.stringify(products));
  render();renderAdmin();
}

function sendCharge(){
  charges.push({amount:camount.value,img:cimg.value});
  localStorage.setItem("charges",JSON.stringify(charges));
  alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨");
  toggle();
}

function toggle(id){
  document.querySelectorAll(".box").forEach(b=>b.classList.add("hidden"));
  if(id) document.getElementById(id).classList.remove("hidden");
}

if(currentUser){
  document.getElementById("userName").innerText="ğŸ‘‹ "+currentUser.name;
  document.getElementById("loginBtn").style.display="none";
  if(currentUser.email===ADMIN){
    document.getElementById("adminBox").classList.remove("hidden");
    renderAdmin();
  }
}
</script>

</body>
</html>
