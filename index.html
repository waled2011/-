// denji_api_full.js
const axios = require("axios");

const BASE_URL = "http://api.denji-sms.xyz/api/v1";

async function run() {
  try {
    // 1ï¸âƒ£ Ø¬Ù„Ø¨ Ø§Ù„Ø±ØµÙŠØ¯
    const balance = await axios.get(`${BASE_URL}/account/balance`);
    console.log("ğŸ’° Ø§Ù„Ø±ØµÙŠØ¯:", balance.data);

    // 2ï¸âƒ£ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù…ØªØ§Ø­Ø©
    const availableNumbers = await axios.get(`${BASE_URL}/numbers/available`);
    console.log("ğŸ“± Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù…ØªØ§Ø­Ø©:", availableNumbers.data);

    // 3ï¸âƒ£ Ø·Ù„Ø¨ Ø±Ù‚Ù… (Google - Thailand)
    const requestNumber = await axios.post(
      `${BASE_URL}/numbers/request`,
      { api_code: "th_go_s2" },
      { headers: { "Content-Type": "application/json" } }
    );

    const requestId = requestNumber.data.data.request_id;
    console.log("ğŸ“ ØªÙ… Ø·Ù„Ø¨ Ø§Ù„Ø±Ù‚Ù…:", requestNumber.data);

    // 4ï¸âƒ£ ÙØ­Øµ Ø­Ø§Ù„Ø© Ø§Ù„Ø±Ù‚Ù… (Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„ÙƒÙˆØ¯)
    const numberStatus = await axios.get(
      `${BASE_URL}/numbers/status/${requestId}`
    );
    console.log("ğŸ” Ø­Ø§Ù„Ø© Ø§Ù„Ø±Ù‚Ù…:", numberStatus.data);

    // 5ï¸âƒ£ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ø§Ù„Ù…ØªØ§Ø­Ø©
    const socialAvailable = await axios.get(
      `${BASE_URL}/social/available`
    );
    console.log("ğŸ“Š Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„:", socialAvailable.data);

    // 6ï¸âƒ£ Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø© Ø³ÙˆØ´ÙŠØ§Ù„ (TikTok Followers)
    const socialRequest = await axios.post(
      `${BASE_URL}/social/request`,
      {
        api_code: "tk_fy",
        qty: 1000,
        link: "https://www.tiktok.com/@username/video/12345"
      },
      { headers: { "Content-Type": "application/json" } }
    );

    const socialRequestId = socialRequest.data.data.request_id;
    console.log("ğŸš€ ØªÙ… Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø© Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„:", socialRequest.data);

    // 7ï¸âƒ£ Ù…ØªØ§Ø¨Ø¹Ø© Ø­Ø§Ù„Ø© Ø®Ø¯Ù…Ø© Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„
    const socialStatus = await axios.get(
      `${BASE_URL}/social/status/${socialRequestId}`
    );
    console.log("ğŸ“¦ Ø­Ø§Ù„Ø© Ø·Ù„Ø¨ Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„:", socialStatus.data);

  } catch (error) {
    console.error("âŒ Ø®Ø·Ø£:", error.response?.data || error.message);
  }
}

run();
