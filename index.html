<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Gem Shop</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:Arial}
body{
  margin:0;
  min-height:100vh;
  background:linear-gradient(135deg,#000,#111);
  color:#fff;
}
.hidden{display:none}

.container{
  max-width:420px;
  margin:auto;
  padding:10px;
}

.card{
  background:#1a1a1a;
  border-radius:14px;
  padding:15px;
  margin:10px 0;
}

input,button{
  width:100%;
  padding:12px;
  margin:6px 0;
  border-radius:10px;
  border:none;
}

button{
  background:#ff7a18;
  font-weight:bold;
}

.top{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.balance{font-weight:bold}

.menuBtn{
  background:none;
  color:#fff;
  font-size:22px;
}

.menuList{
  position:absolute;
  right:10px;
  background:#222;
  border-radius:10px;
}

.menuList div{
  padding:10px;
  border-bottom:1px solid #333;
}

.bottom{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  background:#111;
  display:flex;
  justify-content:space-around;
  padding:10px 0;
}

.bottom div{
  text-align:center;
  font-size:14px;
}
</style>
</head>

<body>
<div class="container">

<!-- AUTH -->
<div id="auth" class="card">
  <h2>Gem Shop</h2>
  <input id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
  <input id="password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  <button onclick="login()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
  <button onclick="register()">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
</div>

<!-- APP -->
<div id="app" class="hidden">

<div class="top">
  <div class="balance">ğŸ’° <span id="balance">0</span>$</div>
  <div>
    <button class="menuBtn" onclick="toggleMenu()">â‹®</button>
    <div id="menu" class="menuList hidden">
      <div onclick="changePassword()">ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</div>
      <div onclick="changeTheme()">ØªØºÙŠÙŠØ± Ø§Ù„Ø®Ù„ÙÙŠØ©</div>
      <div onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</div>
    </div>
  </div>
</div>

<div id="content"></div>

</div>
</div>

<!-- Bottom Nav -->
<div class="bottom hidden" id="bottomNav">
  <div onclick="home()">ğŸ <br>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
  <div onclick="orders()">ğŸ“¦<br>Ø·Ù„Ø¨Ø§ØªÙŠ</div>
</div>

<script>
const ADMIN="wled49645@gmail.com";
let users=JSON.parse(localStorage.users||"[]");
let user=null;
let theme=0;

function save(){localStorage.users=JSON.stringify(users)}

if(!users.find(u=>u.email===ADMIN)){
 users.push({email:ADMIN,password:"wled12123456",balance:100,orders:[],admin:true});
 save();
}

function register(){
 if(users.find(u=>u.email===email.value))return alert("Ù…ÙˆØ¬ÙˆØ¯");
 users.push({email:email.value,password:password.value,balance:0,orders:[],admin:false});
 save(); alert("ØªÙ…");
}

function login(){
 user=users.find(u=>u.email===email.value&&u.password===password.value);
 if(!user)return alert("Ø®Ø·Ø£");
 auth.classList.add("hidden");
 app.classList.remove("hidden");
 bottomNav.classList.remove("hidden");
 home();
 update();
}

function update(){balance.innerText=user.balance}

function home(){
 content.innerHTML=`
 <div class="card">
 <button onclick="buy('100 Ø¬ÙˆÙ‡Ø±Ø©',0.5)">100 Ø¬ÙˆÙ‡Ø±Ø© - 0.5$</button>
 <button onclick="buy('200 Ø¬ÙˆÙ‡Ø±Ø©',1)">200 Ø¬ÙˆÙ‡Ø±Ø© - 1$</button>
 </div>`;
}

function buy(name,price){
 if(user.balance<price)return alert("Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§Ù");
 user.balance-=price;
 user.orders.push({name,status:"Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°"});
 save(); update();
 alert("Ù‚ÙŠØ¯ Ø§Ù„Ø´Ø­Ù† Ù…Ù† 1 Ø¥Ù„Ù‰ 5 Ø¯Ù‚Ø§Ø¦Ù‚");
}

function orders(){
 content.innerHTML=user.orders.length
 ? user.orders.map(o=>`<div class="card">${o.name}<br>${o.status}</div>`).join("")
 : "<div class='card'>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª</div>";
}

function toggleMenu(){menu.classList.toggle("hidden")}

function changePassword(){
 let p=prompt("ÙƒÙ„Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©");
 if(!p)return;
 user.password=p; save(); alert("ØªÙ…");
}

function changeTheme(){
 theme=(theme+1)%3;
 document.body.style.background=[
 "linear-gradient(#fff,#000)",
 "linear-gradient(#900,#000)",
 "linear-gradient(#005,#000)"
 ][theme];
}

function logout(){location.reload()}
</script>
</body>
</html>
