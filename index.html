<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Best Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:tahoma;background:#111;color:#fff;margin:0}
header{background:#000;padding:15px;display:flex;justify-content:space-between;align-items:center}
button{background:#00c3ff;border:none;padding:8px 14px;border-radius:6px;cursor:pointer}
input,select,textarea{width:100%;margin:5px 0;padding:6px}
.hidden{display:none}
.card{background:#1c1c1c;margin:10px;padding:10px;border-radius:8px}
img{max-width:100%;border-radius:6px}
</style>
</head>
<body>

<header>
  <b>BEST STORE</b>
  <div id="userBox">
    <button onclick="openLogin()">تسجيل الدخول</button>
  </div>
</header>

<!-- تسجيل الدخول -->
<div id="loginBox" class="card hidden">
  <h3>تسجيل الدخول</h3>
  <input id="email" placeholder="الإيميل">
  <button onclick="login()">دخول</button>
  <button onclick="googleLogin()">تسجيل الدخول عبر Google</button>
</div>

<!-- إضافة منتج (أدمن فقط) -->
<div id="adminPanel" class="card hidden">
  <h3>إضافة منتج</h3>
  <input id="pName" placeholder="اسم المنتج">
  <input id="pPrice" placeholder="السعر">
  <select id="pCat">
    <option>تطبيقات</option>
    <option>أشياء</option>
  </select>
  <input id="pImg" placeholder="رابط الصورة">
  <textarea id="pDesc" placeholder="وصف المنتج"></textarea>
  <input id="pBalance" placeholder="الرصيد / الكمية">
  <button onclick="addProduct()">إضافة</button>
</div>

<!-- المنتجات -->
<div id="products"></div>

<!-- تعبئة رصيد -->
<div class="card">
  <h3>تعبئة رصيد</h3>
  <p>التحويل إلى:</p>
  <b>29607b06505ee18f34a7fc5022404325</b>
  <input id="chargeAmount" placeholder="المبلغ">
  <input id="chargeImg" placeholder="رابط صورة التحويل">
  <button onclick="sendCharge()">إرسال</button>
</div>

<script>
const ADMIN = "wled49645@gmail.com";
let currentUser = null;
let products = JSON.parse(localStorage.getItem("products")||"[]");
let charges = JSON.parse(localStorage.getItem("charges")||"[]");

function openLogin(){
  document.getElementById("loginBox").classList.toggle("hidden");
}

function login(){
  const email = document.getElementById("email").value;
  if(!email) return alert("اكتب الإيميل");
  currentUser = email;
  document.getElementById("loginBox").classList.add("hidden");
  document.getElementById("userBox").innerHTML = email;
  if(email === ADMIN){
    document.getElementById("adminPanel").classList.remove("hidden");
  }
}

function googleLogin(){
  alert("واجهة Google فقط — اربطها لاحقًا بـ Firebase");
}

function addProduct(){
  products.push({
    name:pName.value,
    price:pPrice.value,
    cat:pCat.value,
    img:pImg.value,
    desc:pDesc.value,
    bal:pBalance.value
  });
  localStorage.setItem("products",JSON.stringify(products));
  render();
}

function render(){
  const box=document.getElementById("products");
  box.innerHTML="";
  products.forEach(p=>{
    box.innerHTML+=`
    <div class="card">
      <img src="${p.img}">
      <h4>${p.name}</h4>
      <p>${p.desc}</p>
      <p>القسم: ${p.cat}</p>
      <p>الرصيد: ${p.bal}</p>
      <b>${p.price}</b>
      <input placeholder="ID الخاص بك">
      <textarea placeholder="وصف إضافي"></textarea>
    </div>`;
  });
}

function sendCharge(){
  charges.push({
    amount:chargeAmount.value,
    img:chargeImg.value
  });
  localStorage.setItem("charges",JSON.stringify(charges));
  alert("تم إرسال الطلب");
}

render();
</script>

</body>
</html>
